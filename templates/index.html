<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Генератор сайтов на GPT-4</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="icon" href="img/extension_icon.png">
</head>
<body>
<div class="background-svg">
    <svg class="svg-left" viewBox="0 0 300 900" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M0,0 Q150,200 0,400 Q150,600 0,900 L0,0 Z" fill="#e0f2fe"/>
    </svg>
    <svg class="svg-right" viewBox="0 0 300 900" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M300,0 Q150,200 300,400 Q150,600 300,900 L300,0 Z" fill="#f0fdf4"/>
    </svg>
</div>
<div class="main-layout d-flex flex-row justify-content-center align-items-start">
    <!-- Левая панель -->
    <aside class="sidebar-left d-none d-lg-flex flex-column align-items-end pe-3">
        <div class="sidebar-block mb-4 animate__animated animate__fadeInLeft">
            <h6 class="fw-bold mb-2"><i class="fa-solid fa-lightbulb me-1 text-warning"></i>Советы</h6>
            <ul class="tips-list small">
                <li>Опишите структуру сайта: секции, блоки, футер, меню.</li>
                <li>Укажите желаемые цвета, стиль, шрифты.</li>
                <li>Добавьте пожелания по кнопкам, формам, изображениям.</li>
                <li>Чем подробнее описание — тем лучше результат!</li>
            </ul>
        </div>
        <div class="sidebar-block animate__animated animate__fadeInLeft animate__delay-1s">
            <h6 class="fw-bold mb-2"><i class="fa-solid fa-wand-magic-sparkles me-1 text-primary"></i>Примеры промптов</h6>
            <div class="row g-2">
                <div class="col-12">
                    <div class="prompt-card" onclick="insertPrompt('Сайт для кофейни с 3 секциями: о нас, меню, контакты. Кнопка заказать столик.')">
                        <i class="fa-solid fa-mug-hot me-2"></i>Кофейня, 3 секции, кнопка
                    </div>
                </div>
                <div class="col-12">
                    <div class="prompt-card" onclick="insertPrompt('Лендинг для IT-компании: блоки о компании, услуги, отзывы, футер с контактами. Современный стиль.')">
                        <i class="fa-solid fa-laptop-code me-2"></i>IT-компания, отзывы, футер
                    </div>
                </div>
                <div class="col-12">
                    <div class="prompt-card" onclick="insertPrompt('Портфолио фотографа: галерея, о себе, контакты, минимализм, светлая гамма.')">
                        <i class="fa-solid fa-camera-retro me-2"></i>Портфолио, галерея, минимализм
                    </div>
                </div>
            </div>
        </div>
    </aside>
    <!-- Центральный блок -->
    <main class="main-content flex-grow-1">
        <header class="mb-4 text-center">
            <div class="mb-2">
                <i class="fa-solid fa-robot fa-2x text-primary"></i>
            </div>
            <h1 class="mb-1">Генератор сайтов на GPT-4</h1>
            <p class="lead text-secondary">Создайте адаптивный сайт по описанию за секунды. Просто опишите, что хотите — и получите готовый HTML-код!</p>
        </header>
        <section class="mb-4 p-3 bg-light rounded-4 shadow-sm animate__animated animate__fadeIn">
            <form id="genForm" autocomplete="off">
                <div class="mb-3">
                    <label for="description" class="form-label">
                        <i class="fa-regular fa-pen-to-square me-1"></i>Описание сайта
                    </label>
                    <textarea class="form-control" id="description" rows="4" placeholder="Например: Сайт для кофейни с 3 блоками и кнопкой заказать" required></textarea>
                    <div class="form-text">Опишите структуру, стиль, желаемые блоки и элементы. Чем подробнее — тем лучше результат.</div>
                </div>
                <div class="mb-3">
                    <label for="style" class="form-label">
                        <i class="fa-solid fa-palette me-1"></i>Стиль сайта
                    </label>
                    <select class="form-select" id="style">
                        <option value="минимализм">Минимализм</option>
                        <option value="бизнес">Бизнес</option>
                        <option value="цветной">Цветной</option>
                        <option value="современный">Современный</option>
                    </select>
                    <div class="form-text">Выберите визуальный стиль для будущего сайта.</div>
                </div>
                <div class="d-flex flex-wrap gap-2 align-items-center mb-2">
                    <button id="generateBtn" class="btn btn-primary d-flex align-items-center" type="button">
                        <i class="fa-solid fa-wand-magic-sparkles me-2"></i>Сгенерировать
                    </button>
                    <button id="downloadBtn" class="btn btn-success d-flex align-items-center" type="button" disabled>
                        <i class="fa-solid fa-download me-2"></i>Скачать HTML
                    </button>
                </div>
            </form>
            <div class="small text-muted mt-1"><i class="fa-solid fa-circle-info me-1"></i>Генерация занимает 5-15 секунд. HTML-файл можно скачать после успешной генерации.</div>
        </section>
        <section class="mt-4 animate__animated animate__fadeInUp">
            <h5 class="mb-2"><i class="fa-solid fa-eye me-1"></i>Предпросмотр сайта</h5>
            <iframe id="previewFrame" style="width:100%; min-height:400px; border:1px solid #ccc;"></iframe>
            <div id="errorMsg" class="alert alert-danger mt-3 d-none"></div>
        </section>
        <footer class="text-center mt-4 mb-2 text-secondary small">
            <hr>
            <div>© 2024 Генератор сайтов на GPT-4 | <i class="fa-brands fa-github"></i> <a href="https://platform.openai.com/" target="_blank" class="text-decoration-none">OpenAI API</a></div>
        </footer>
    </main>
    <!-- Правая панель -->
    <aside class="sidebar-right d-none d-xl-flex flex-column align-items-start ps-3">
        <div class="sidebar-block mb-4 animate__animated animate__fadeInRight">
            <h6 class="fw-bold mb-2"><i class="fa-solid fa-circle-info me-1 text-info"></i>О сервисе</h6>
            <div class="small">Этот сервис использует <b>OpenAI GPT-4</b> для генерации адаптивных HTML-сайтов по вашему описанию. Всё происходит за секунды, без регистрации и лишних действий.</div>
        </div>
        <div class="sidebar-block animate__animated animate__fadeInRight animate__delay-1s">
            <h6 class="fw-bold mb-2"><i class="fa-solid fa-star me-1 text-success"></i>Преимущества</h6>
            <ul class="small mb-0">
                <li>Мгновенная генерация сайта</li>
                <li>Современный UI/UX</li>
                <li>Готовый HTML для скачивания</li>
                <li>Без регистрации и рекламы</li>
            </ul>
        </div>
    </aside>
</div>
<!-- Модальное окно оплаты -->
<div class="modal fade" id="payModal" tabindex="-1" aria-labelledby="payModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content pay-modal-content">
      <div class="modal-header border-0 pb-0" style="background: linear-gradient(90deg, #3b82f6 30%, #06b6d4 100%); border-top-left-radius: 1.2rem; border-top-right-radius: 1.2rem;">
        <div class="w-100 text-center">
          <i class="fa-solid fa-credit-card fa-3x text-white mb-2"></i>
          <h5 class="modal-title text-white fw-bold" id="payModalLabel">Доступ к генерации сайта</h5>
        </div>
        <button type="button" class="btn-close btn-close-white position-absolute end-0 top-0 m-3" data-bs-dismiss="modal" aria-label="Закрыть"></button>
      </div>
      <div class="modal-body text-center py-4">
        <div class="mb-3">
          <div class="pay-badge mb-2"><i class="fa-solid fa-lock"></i> Премиум-доступ</div>
          <div class="mb-2 text-secondary">Генерация сайта доступна только после оплаты.<br>Выберите количество генераций:</div>
          <div class="d-flex justify-content-center gap-2 mb-3">
            <button type="button" class="btn btn-outline-primary pay-count-btn" data-count="1">1</button>
            <button type="button" class="btn btn-outline-primary pay-count-btn" data-count="3">3</button>
            <button type="button" class="btn btn-outline-primary pay-count-btn" data-count="5">5</button>
          </div>
          <div class="mb-3">
            <span class="fs-5">Итого: </span>
            <span class="fs-4 fw-bold" id="payTotal">199</span>
            <span class="fs-6">₽</span>
            <span class="text-muted small ms-2" id="payPer">(1 × 199₽)</span>
          </div>
          <button id="payBtn" class="btn btn-success btn-lg px-5 py-2 pay-btn-animate"><i class="fa-solid fa-money-bill-wave me-2"></i>Оплатить</button>
        </div>
        <div class="text-start mt-4 pay-benefits">
          <div class="fw-bold mb-2"><i class="fa-solid fa-star text-warning me-1"></i>Преимущества:</div>
          <ul class="mb-0 ps-3 small text-secondary">
            <li>Мгновенная генерация сайта по вашему описанию</li>
            <li>Современный UI/UX и адаптивная вёрстка</li>
            <li>Готовый HTML-файл для скачивания</li>
            <li>Без рекламы и регистрации</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
let isPaid = false;
let payCount = 1;
const generateBtn = document.getElementById('generateBtn');
const downloadBtn = document.getElementById('downloadBtn');
const previewFrame = document.getElementById('previewFrame');
const errorMsg = document.getElementById('errorMsg');

window.onload = () => {
    document.getElementById('description').focus();
};

generateBtn.onclick = async () => {
    if (!isPaid) {
        const payModal = new bootstrap.Modal(document.getElementById('payModal'));
        payModal.show();
        return;
    }
    errorMsg.classList.add('d-none');
    generateBtn.disabled = true;
    downloadBtn.disabled = true;
    generateBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Генерируется...';
    const description = document.getElementById('description').value;
    const style = document.getElementById('style').value;
    try {
        const resp = await fetch('/generate', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({description, style})
        });
        const data = await resp.json();
        if (data.success) {
            previewFrame.src = '/preview?' + Date.now();
            downloadBtn.disabled = false;
        } else {
            errorMsg.textContent = data.error || 'Ошибка генерации';
            errorMsg.classList.remove('d-none');
        }
    } catch (e) {
        errorMsg.textContent = 'Ошибка соединения';
        errorMsg.classList.remove('d-none');
    }
    generateBtn.disabled = false;
    generateBtn.innerHTML = '<i class="fa-solid fa-wand-magic-sparkles me-2"></i>Сгенерировать';
};

downloadBtn.onclick = () => {
    window.location = '/download';
};

// Оплата
const payBtns = document.querySelectorAll('.pay-count-btn');
const payTotal = document.getElementById('payTotal');
const payPer = document.getElementById('payPer');
const payBtn = document.getElementById('payBtn');
const PRICE = 199;

payBtns.forEach(btn => {
    btn.onclick = function() {
        payBtns.forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        payCount = parseInt(this.getAttribute('data-count'));
        payTotal.textContent = payCount * PRICE;
        payPer.textContent = `(${payCount} × ${PRICE}₽)`;
    };
});
// По умолчанию активна 1 генерация
payBtns[0].classList.add('active');

payBtn.onclick = function() {
    isPaid = true;
    const payModal = bootstrap.Modal.getInstance(document.getElementById('payModal'));
    payModal.hide();
    setTimeout(() => {
        generateBtn.click();
    }, 400);
};

function insertPrompt(text) {
    document.getElementById('description').value = text;
    document.getElementById('description').focus();
}
</script>
<style>
.pay-modal-content {
  border-radius: 1.2rem;
  overflow: hidden;
  box-shadow: 0 8px 32px rgba(60, 72, 100, 0.18);
  border: none;
}
.pay-badge {
  display: inline-block;
  background: linear-gradient(90deg, #3b82f6 60%, #06b6d4 100%);
  color: #fff;
  font-weight: 600;
  border-radius: 1em;
  padding: 0.35em 1.1em 0.35em 1em;
  font-size: 1.08rem;
  margin-bottom: 0.5em;
  box-shadow: 0 2px 8px rgba(59,130,246,0.10);
}
.pay-count-btn {
  min-width: 54px;
  font-size: 1.1rem;
  font-weight: 600;
  border-radius: 0.8em;
  border-width: 2px;
  transition: background 0.2s, color 0.2s, border 0.2s, box-shadow 0.2s;
}
.pay-count-btn.active, .pay-count-btn:active, .pay-count-btn:focus {
  background: linear-gradient(90deg, #3b82f6 60%, #06b6d4 100%);
  color: #fff;
  border-color: #3b82f6;
  box-shadow: 0 2px 8px rgba(59,130,246,0.10);
}
.pay-btn-animate {
  font-size: 1.15rem;
  font-weight: 700;
  border-radius: 0.9em;
  box-shadow: 0 4px 16px rgba(34, 197, 94, 0.10);
  transition: background 0.2s, transform 0.1s, box-shadow 0.2s;
}
.pay-btn-animate:hover, .pay-btn-animate:focus {
  background: linear-gradient(90deg, #16a34a 60%, #22c55e 100%);
  transform: translateY(-2px) scale(1.04);
  box-shadow: 0 8px 32px rgba(34, 197, 94, 0.18);
}
.pay-benefits ul {
  margin-bottom: 0;
}
</style>
</body>
</html> 